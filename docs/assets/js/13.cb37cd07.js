(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{370:function(e,t,a){"use strict";a.r(t);var r=a(2),n=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("本稿では，音声データからテキストに変換する文字起こしを実装します．"),a("br")]),e._v(" "),a("p",[e._v("まだ精神が病んでるので，時にyoutubeで人の話を聞いて，認知療法に役立てているのですが，聞いてから文字に起こすのが面倒くさくなり，実装し始めました．"),a("br"),e._v("\nサンプルとして"),a("a",{attrs:{href:"https://pj.ninjal.ac.jp/corpus_center/csj/sample.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("コーパス開発センター音声・転記テキストサンプル"),a("OutboundLink")],1),e._v("から\n学会講演［音声］のサンプル音声(aps-smp.mp3)をダウンロードします．")]),e._v(" "),a("h2",{attrs:{id:"事前準備"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事前準備"}},[e._v("#")]),e._v(" 事前準備")]),e._v(" "),a("p",[e._v("ここではSpeechRecognitionというモジュールを用いります．googleのAPIを間接的に利用します．"),a("br"),e._v(" "),a("a",{attrs:{href:"https://cloud.google.com/speech-to-text/docs/libraries#client-libraries-install-python",target:"_blank",rel:"noopener noreferrer"}},[e._v("Speech-to-Text 公式API"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language-init extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("pip install SpeechRecognition\n# Successfully installed SpeechRecognition-3.8.1\n")])])]),a("h2",{attrs:{id:"音声のファイル変換"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#音声のファイル変換"}},[e._v("#")]),e._v(" 音声のファイル変換")]),e._v(" "),a("p",[e._v("サンプルコードでは読み込む拡張子が「.wav」となっているため，mp3 -> wavに変換します．"),a("br"),e._v("\nファイル変換はターミナル上でffmpegで実行します．")]),e._v(" "),a("div",{staticClass:"language-再生リストのダウンロード extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# ffmpegのインストール\napt-get install -y ffmpeg\n\n# ファイルの変換\nffmpeg -i aps-smp.mp3 aps-smp.wav\n")])])]),a("h2",{attrs:{id:"音声のテキスト変換"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#音声のテキスト変換"}},[e._v("#")]),e._v(" 音声のテキスト変換")]),e._v(" "),a("p",[e._v("以下のコードで音声からテキストに変換する文字起こしに実施します．")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("# 音声のテキスト変換\nimport speech_recognition as sr\n \nr = sr.Recognizer()\n \nwith sr.AudioFile(\"aps-smp.wav\") as source:\n    audio = r.record(source)\ntext = r.recognize_google(audio, language='ja-JP')\n \nprint(text)\n")])])]),a("h2",{attrs:{id:"今後のやりたいこと"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#今後のやりたいこと"}},[e._v("#")]),e._v(" 今後のやりたいこと")]),e._v(" "),a("p",[e._v("短い音声ファイルではありますが，音声からの文字起こしはできました．"),a("br"),e._v("\n今後は長い動画での文字起こし(できるだけ無料で)に実装したいです．")]),e._v(" "),a("h2",{attrs:{id:"参考サイト"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考サイト"}},[e._v("#")]),e._v(" 参考サイト")]),e._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://self-development.info/python%E3%81%A7%E9%9F%B3%E5%A3%B0%E3%81%8B%E3%82%89%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%81%B8%E5%A4%89%E6%8F%9B%E3%80%90speechrecognition%E3%80%91/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Pythonで音声からテキストへ変換"),a("OutboundLink")],1)]),e._v(" "),a("li",[a("a",{attrs:{href:"https://qiita.com/seigot/items/62a85f1a561bb820532a",target:"_blank",rel:"noopener noreferrer"}},[e._v("MacでpythonのSpeechRecognitionを使って音声認識"),a("OutboundLink")],1)])]),e._v(" "),a("h2",{attrs:{id:"エラーコード"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#エラーコード"}},[e._v("#")]),e._v(" エラーコード")]),e._v(" "),a("h3",{attrs:{id:"エラーコード1"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#エラーコード1"}},[e._v("#")]),e._v(" エラーコード1")]),e._v(" "),a("p",[e._v("あまりに時間の長い音声ファイル(無料枠から外れる)を変換したり，言語として読み取れなかったりすると，以下のエラーが発生します．"),a("br"),e._v(" "),a("a",{attrs:{href:"https://stackoverflow.com/questions/51757824/recognize-google-speech-recognition-broken-pipe-python",target:"_blank",rel:"noopener noreferrer"}},[e._v("recognize_google speech recognition broken pipe python"),a("OutboundLink")],1)]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("RequestError: recognition connection failed: [Errno 32] Broken pipe\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);