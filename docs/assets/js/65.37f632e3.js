(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{482:function(t,a,s){"use strict";s.r(a);var e=s(2),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Real-ESRGANを用いた画像の高画質化を実施します．"),s("br")]),t._v(" "),s("p",[t._v("今回はGoogle ColabとGoogle Driveを連携させて，notebook形式で実行してます．"),s("br")]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1),t._v(" "),s("blockquote",[s("p",[t._v("Google Colaboratory（以下Google Colab）は、Google社が無料で提供している機械学習の教育や研究用の開発環境です。開発環境はJupyter Notebookに似たインターフェースを持ち、Pythonの主要なライブラリがプリインストールされています。"),s("br"),t._v("\n引用元："),s("a",{attrs:{href:"https://interface.cqpub.co.jp/ail01/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google Colabの使い方"),s("OutboundLink")],1)])]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#google-colabのファイル構成"}},[t._v("Google Colabのファイル構成")])]),s("li",[s("a",{attrs:{href:"#google-driveと連携"}},[t._v("Google Driveと連携")])]),s("li",[s("a",{attrs:{href:"#モジュールのインストール"}},[t._v("モジュールのインストール")])]),s("li",[s("a",{attrs:{href:"#学習済みモデルのダウンロード"}},[t._v("学習済みモデルのダウンロード")])]),s("li",[s("a",{attrs:{href:"#高画質化の実行"}},[t._v("高画質化の実行")]),s("ul",[s("li",[s("a",{attrs:{href:"#pre-trained-model1-realesrgan-x4plus-pth"}},[t._v("pre-trained model1: RealESRGAN_x4plus.pth")])]),s("li",[s("a",{attrs:{href:"#pre-trained-model2-realesrgan-x4plus-anime-6b"}},[t._v("pre-trained model2: RealESRGANx4plusanime_6B")])])])]),s("li",[s("a",{attrs:{href:"#まとめ"}},[t._v("まとめ")])]),s("li",[s("a",{attrs:{href:"#参考サイト"}},[t._v("参考サイト")])])])]),s("p"),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HBXCY+4DRW36+50+2HM5Z5",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www27.a8.net/svt/bgt?aid=210508450265&wid=001&eno=01&mid=s00000000018015052000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www10.a8.net/0.gif?a8mat=3HBXCY+4DRW36+50+2HM5Z5",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www23.a8.net/svt/bgt?aid=210821855239&wid=001&eno=01&mid=s00000001642001062000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www17.a8.net/0.gif?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",rel:"nofollow"}},[t._v("全国630店舗以上！もみほぐし・足つぼ・ハンドリフレ・クイックヘッドのリラクゼーション店【りらくる】")]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www15.a8.net/0.gif?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"google-colabのファイル構成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#google-colabのファイル構成"}},[t._v("#")]),t._v(" Google Colabのファイル構成")]),t._v(" "),s("p",[t._v("プロジェクトディレクトリはBetterPictureとしています．度々，省略しています．")]),t._v(" "),s("div",{staticClass:"language-init extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("BetterPicture\n├── /Real-ESRGAN\n│   ├── /inputs <- 入力\n│   ├── /results <- 出力\n│   ├── /experiments/pretrained_models <- 学習済みモデル\n│   └── (　省略)\n└── BetterPicture.ipynb <- 実行用ノートブック\n")])])]),s("h2",{attrs:{id:"google-driveと連携"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#google-driveと連携"}},[t._v("#")]),t._v(" Google Driveと連携")]),t._v(" "),s("p",[t._v("Google ColabとGoogle Driveを連携させて，gitから"),s("a",{attrs:{href:"https://github.com/xinntao/Real-ESRGAN.git",target:"_blank",rel:"noopener noreferrer"}},[t._v("xinntao/Real-ESRGAN"),s("OutboundLink")],1),t._v("をダウンロードします．"),s("br")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Google Driveと連携")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" google"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colab "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" drive\ndrive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/content/drive'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ディレクトリの移動")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("cd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("drive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("My\\ Drive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("BetterPicture\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# gitのダウンロード")]),t._v("\n!git clone https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xinntao"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Real"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ESRGAN"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("cd Real"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ESRGAN\n!ls\n")])])]),s("h2",{attrs:{id:"モジュールのインストール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#モジュールのインストール"}},[t._v("#")]),t._v(" モジュールのインストール")]),t._v(" "),s("p",[t._v("下記のコマンドでモジュールをインストールします．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ffmpeg")]),t._v("\n!apt"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("get install ffmpeg\n!pip install pydub\n\n!pip install basicsr\n\n!pip install facexlib\n!pip install gfpgan\n!pip install "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("r requirements"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("txt\n!python setup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py develop\n")])])]),s("h2",{attrs:{id:"学習済みモデルのダウンロード"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#学習済みモデルのダウンロード"}},[t._v("#")]),t._v(" 学習済みモデルのダウンロード")]),t._v(" "),s("p",[t._v("下記のコードで学習済みモデルをダウンロードします．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!wget https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xinntao"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Real"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ESRGAN"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("releases"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("download"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("RealESRGAN_x4plus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("P experiments"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pretrained_models\n!wget https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("xinntao"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Real"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("ESRGAN"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("releases"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("download"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("v0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.2")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".4")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("RealESRGAN_x4plus_anime_6B"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("P experiments"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pretrained_models\n")])])]),s("h2",{attrs:{id:"高画質化の実行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#高画質化の実行"}},[t._v("#")]),t._v(" 高画質化の実行")]),t._v(" "),s("p",[t._v("下記のコードで高画質化を実行します．結果はresultに格納されます．")]),t._v(" "),s("h3",{attrs:{id:"pre-trained-model1-realesrgan-x4plus-pth"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pre-trained-model1-realesrgan-x4plus-pth"}},[t._v("#")]),t._v(" pre-trained model1: RealESRGAN_x4plus.pth")]),t._v(" "),s("p",[t._v("デフォルト用のモデルです．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!python inference_realesrgan"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("model_path experiments"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pretrained_models"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("RealESRGAN_x4plus"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("input")]),t._v(" inputs\n")])])]),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# from PIL import Image")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" IPython"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("display "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("display_jpeg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("display_png\n\ndisplay_jpeg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./inputs/0014.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndisplay_jpeg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./results/0014_out.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"jpg","data-src":"/image/sample_01.jpeg",loading:"lazy"}})]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"jpg","data-src":"/image/sample_02.jpeg",loading:"lazy"}})]),t._v(" "),s("h3",{attrs:{id:"pre-trained-model2-realesrgan-x4plus-anime-6b"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pre-trained-model2-realesrgan-x4plus-anime-6b"}},[t._v("#")]),t._v(" pre-trained model2: RealESRGAN_x4plus_anime_6B")]),t._v(" "),s("p",[t._v("モデルサイズが小さいアニメ画像用に最適化されたモデルです．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!python inference_realesrgan"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("model_path experiments"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("pretrained_models"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("RealESRGAN_x4plus_anime_6B"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pth "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("input")]),t._v(" inputs\n")])])]),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# from PIL import Image")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" IPython"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("display "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("display_jpeg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("display_png\n\ndisplay_jpeg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./inputs/0014.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ndisplay_jpeg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Image"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./results/0014_out.jpg'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"jpg","data-src":"/image/sample_01.jpeg",loading:"lazy"}})]),t._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"jpg","data-src":"/image/sample_03.jpeg",loading:"lazy"}})]),t._v(" "),s("h2",{attrs:{id:"まとめ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#まとめ"}},[t._v("#")]),t._v(" まとめ")]),t._v(" "),s("p",[t._v("本稿では，上記のコードでアニメの高画質化を実装しました．")]),t._v(" "),s("p",[t._v("次からは，動画の高画質を実装します．")]),t._v(" "),s("h2",{attrs:{id:"参考サイト"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考サイト"}},[t._v("#")]),t._v(" 参考サイト")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/xinntao/Real-ESRGAN.git",target:"_blank",rel:"noopener noreferrer"}},[t._v("xinntao/Real-ESRGAN"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HBXCY+4DRW36+50+2HM5Z5",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www27.a8.net/svt/bgt?aid=210508450265&wid=001&eno=01&mid=s00000000018015052000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www10.a8.net/0.gif?a8mat=3HBXCY+4DRW36+50+2HM5Z5",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www23.a8.net/svt/bgt?aid=210821855239&wid=001&eno=01&mid=s00000001642001062000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www17.a8.net/0.gif?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",rel:"nofollow"}},[t._v("全国630店舗以上！もみほぐし・足つぼ・ハンドリフレ・クイックヘッドのリラクゼーション店【りらくる】")]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www15.a8.net/0.gif?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",alt:""}})]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1)],1)}),[],!1,null,null,null);a.default=r.exports}}]);