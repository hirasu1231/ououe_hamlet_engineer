(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{481:function(t,a,s){"use strict";s.r(a);var n=s(2),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Google ColaboratoryでNetwoksXのGPU適用版であるcuGraphを実装します．")]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#gpuの確認"}},[t._v("GPUの確認")])]),s("li",[s("a",{attrs:{href:"#cugraphのインストール"}},[t._v("cuGraphのインストール")]),s("ul",[s("li",[s("a",{attrs:{href:"#環境の確認"}},[t._v("環境の確認")])]),s("li",[s("a",{attrs:{href:"#gccのアップデート"}},[t._v("gccのアップデート")])]),s("li",[s("a",{attrs:{href:"#condaのインストール"}},[t._v("condaのインストール")])]),s("li",[s("a",{attrs:{href:"#インストールの実行"}},[t._v("インストールの実行")])])])]),s("li",[s("a",{attrs:{href:"#速度比較"}},[t._v("速度比較")]),s("ul",[s("li",[s("a",{attrs:{href:"#データの用意"}},[t._v("データの用意")])]),s("li",[s("a",{attrs:{href:"#実行の前処理"}},[t._v("実行の前処理")])]),s("li",[s("a",{attrs:{href:"#速度比較の実行"}},[t._v("速度比較の実行")])])])]),s("li",[s("a",{attrs:{href:"#まとめ"}},[t._v("まとめ")])]),s("li",[s("a",{attrs:{href:"#参考サイト"}},[t._v("参考サイト")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"gpuの確認"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gpuの確認"}},[t._v("#")]),t._v(" GPUの確認")]),t._v(" "),s("p",[t._v("「Tesla T4, P4, or P100」であれば、OKです。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!nvidia"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("smi\n")])])]),s("h2",{attrs:{id:"cugraphのインストール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cugraphのインストール"}},[t._v("#")]),t._v(" cuGraphのインストール")]),t._v(" "),s("p",[t._v("複雑なライブラリですので、いくつかの段階に分かれています。")]),t._v(" "),s("h3",{attrs:{id:"環境の確認"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#環境の確認"}},[t._v("#")]),t._v(" 環境の確認")]),t._v(" "),s("p",[t._v("下記のコードで、インストールできる環境か確認します。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!pip install pynvml\n!git clone https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rapidsai"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rapidsai"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("csp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git\n!python rapidsai"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("csp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("colab"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("env"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("check"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ***********************************************************************")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Woo! Your instance has the right kind of GPU, a Tesla T4!")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ***********************************************************************")]),t._v("\n")])])]),s("h3",{attrs:{id:"gccのアップデート"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gccのアップデート"}},[t._v("#")]),t._v(" gccのアップデート")]),t._v(" "),s("p",[t._v("下記のコードで、gccをアップデートします。")]),t._v(" "),s("p",[t._v("ただし、実行後にセッションをクラッシュさせますので、次のセルはまだ実行しないでください。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!bash rapidsai"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("csp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("colab"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("update_gcc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sh\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\nos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_exit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("00")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ***********************************************************************")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Woo! Your instance has the right kind of GPU, a Tesla T4!")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ***********************************************************************")]),t._v("\n")])])]),s("h3",{attrs:{id:"condaのインストール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#condaのインストール"}},[t._v("#")]),t._v(" condaのインストール")]),t._v(" "),s("p",[t._v("下記のコードで、condaをインストールします。")]),t._v(" "),s("p",[t._v("ただし、実行後にセッションを再起動させますので、次のセルはまだ実行しないでください。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" condacolab\ncondacolab"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  Restarting kernel...")]),t._v("\n")])])]),s("p",[t._v("下記のコードで、condaを確認します。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# condaの確認")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" condacolab\ncondacolab"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("check"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Everything looks OK!")]),t._v("\n")])])]),s("h3",{attrs:{id:"インストールの実行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#インストールの実行"}},[t._v("#")]),t._v(" インストールの実行")]),t._v(" "),s("p",[t._v("下記のコードで、cuGraphなどのインストールを実行します。")]),t._v(" "),s("p",[t._v("ただし、20分以上かかります。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!python rapidsai"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("csp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("colab"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("install_rapids"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("py stable\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\nos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NUMBAPRO_NVVM'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/usr/local/cuda/nvvm/lib64/libnvvm.so'")]),t._v("\nos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NUMBAPRO_LIBDEVICE'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/usr/local/cuda/nvvm/libdevice/'")]),t._v("\nos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("environ"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'CONDA_PREFIX'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/usr/local'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 追記(2022/7/13)")]),t._v("\n!pip install cffi"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.15")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),t._v("\n")])])]),s("h2",{attrs:{id:"速度比較"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#速度比較"}},[t._v("#")]),t._v(" 速度比較")]),t._v(" "),s("h3",{attrs:{id:"データの用意"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#データの用意"}},[t._v("#")]),t._v(" データの用意")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!git clone https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rapidsai"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cugraph"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git cugraph_test\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("cd "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cugraph_test"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("notebooks"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cugraph_benchmarks"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n!sh "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dataPrep"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sh\n")])])]),s("h3",{attrs:{id:"実行の前処理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#実行の前処理"}},[t._v("#")]),t._v(" 実行の前処理")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" gc\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" rmm\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" cugraph\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" cudf\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# NetworkX libraries")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" networkx "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" nx\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" scipy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("io "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" mmread\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("except")]),t._v(" ModuleNotFoundError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("system"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pip install matplotlib'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" matplotlib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pyplot "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" plt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" plt"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("rcdefaults"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" numpy "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" np\n")])])]),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# データ集")]),t._v("\ndata "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'preferentialAttachment'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/preferentialAttachment.mtx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'caidaRouterLevel'")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/caidaRouterLevel.mtx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'coAuthorsDBLP'")]),t._v("          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/coAuthorsDBLP.mtx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dblp'")]),t._v("                   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/dblp-2010.mtx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'citationCiteseer'")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/citationCiteseer.mtx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'coPapersDBLP'")]),t._v("           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/coPapersDBLP.mtx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'coPapersCiteseer'")]),t._v("       "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/coPapersCiteseer.mtx'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'as-Skitter'")]),t._v("             "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/as-Skitter.mtx'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 読み込み")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("read_mtx_file")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mm_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Reading '")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mm_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    M "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mmread"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mm_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("asfptype"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n     \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" M\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cugraphでの処理")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cugraph_call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    gdf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cudf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DataFrame"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    gdf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row\n    gdf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dst'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("col\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\tcuGraph Solving... '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    t1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cugraph Pagerank Call")]),t._v("\n    G "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cugraph"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DiGraph"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    G"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("from_cudf_edgelist"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gdf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'src'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" destination"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dst'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" renumber"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    df "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cugraph"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("G"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    t2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t1\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" t2\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# networkxの処理")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("networkx_call")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    nnz_per_row "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" r "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_shape"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" nnz "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getnnz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        nnz_per_row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nnz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" nnz_per_row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nnz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" nnz "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getnnz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nnz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("float")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nnz_per_row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("row"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("nnz"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    M "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tocsr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" M "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("is")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("None")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" TypeError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Could not read the input graph'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shape"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shape"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("raise")]),t._v(" TypeError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Shape is not square'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# should be autosorted, but check just to make sure")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("not")]),t._v(" M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("has_sorted_indices"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'sort_indices ... '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sort_indices"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    z "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shape"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" k "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("shape"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\\tNetworkX Solving... '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# start timer")]),t._v("\n    t1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    Gnx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("DiGraph"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    pr "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bfs_edges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Gnx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    t2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" t1\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" t2\n")])])]),s("h3",{attrs:{id:"速度比較の実行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#速度比較の実行"}},[t._v("#")]),t._v(" 速度比較の実行")]),t._v(" "),s("p",[t._v("速度比較より、cuGraphの方が早いことがわかる。")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# arrays to capture performance gains")]),t._v("\nperf_nx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nnames "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntime_cu "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\ntime_nx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# do a simple pass just to get all the libraries initiallized")]),t._v("\nv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./data/preferentialAttachment.mtx'")]),t._v("\nM "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" read_mtx_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntrapids "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cugraph_call"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("del")]),t._v(" M\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("v "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("items"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    gc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("collect"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Saved the file Name")]),t._v("\n    names"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# read the data")]),t._v("\n    M "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" read_mtx_file"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("v"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# call cuGraph - this will be the baseline")]),t._v("\n    trapids "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" cugraph_call"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Now call NetworkX")]),t._v("\n    tn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" networkx_call"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("M"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    speedUp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" trapids"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    perf_nx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("speedUp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    time_cu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("trapids"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    time_nx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("del")]),t._v(" M\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\tcuGraph ("')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("trapids"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('")  Nx ("')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("str")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("tn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('")"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reading ./data/preferentialAttachment.mtx...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reading ./data/preferentialAttachment.mtx...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tNetworkX Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph (0.1193091869354248)  Nx (6.346121072769165)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reading ./data/caidaRouterLevel.mtx...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tNetworkX Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph (0.2835068702697754)  Nx (8.1973876953125)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reading ./data/coAuthorsDBLP.mtx...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tNetworkX Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph (0.393646240234375)  Nx (12.876920938491821)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reading ./data/dblp-2010.mtx...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tNetworkX Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph (0.38054418563842773)  Nx (9.99734354019165)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Reading ./data/citationCiteseer.mtx...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tNetworkX Solving... ")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# \tcuGraph (0.35051751136779785)  Nx (15.769287109375)")]),t._v("\n")])])]),s("h2",{attrs:{id:"まとめ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#まとめ"}},[t._v("#")]),t._v(" まとめ")]),t._v(" "),s("p",[t._v("Google ColaboratoryでNetwoksXのGPU適用版であるcuGraphを実装しました．")]),t._v(" "),s("h2",{attrs:{id:"参考サイト"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考サイト"}},[t._v("#")]),t._v(" 参考サイト")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/rapidsai/cugraph",target:"_blank",rel:"noopener noreferrer"}},[t._v("rapidsai/cugraph"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://github.com/rapidsai-community/rapidsai-csp-utils",target:"_blank",rel:"noopener noreferrer"}},[t._v("rapidsai-community/rapidsai-csp-utils"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://colab.research.google.com/drive/1UX18VehsMOMvv-1_Xo4uYUmqAs7STW5E?usp=sharing",target:"_blank",rel:"noopener noreferrer"}},[t._v("python3f/cugraph-learn.ipynb"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://colab.research.google.com/drive/1rY7Ln6rEE1pOlfSHCYOVaqt8OvDO35J0",target:"_blank",rel:"noopener noreferrer"}},[t._v("rapids-colab.ipynb - Colaboratory"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://qiita.com/hironobukawaguchi3/items/7c65ed93cec2ed97d60d",target:"_blank",rel:"noopener noreferrer"}},[t._v("NVIDIAのRAPIDSでcuML, cuDF, cuGraphを試してみる"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://docs.rapids.ai/api/cugraph/stable/api_docs/api/cugraph.Graph.from_cudf_edgelist.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cugraph.Graph.from_cudf_edgelist"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://docs.rapids.ai/api/cugraph/nightly/api_docs/api/cugraph.sssp.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cugraph.sssp"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://towardsdatascience.com/4-graph-algorithms-on-steroids-for-data-scientists-with-cugraph-43d784de8d0e",target:"_blank",rel:"noopener noreferrer"}},[t._v("Graph Algorithms on Steroids for data Scientists with cuGraph"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://analytics-note.xyz/graph-theory/networkx-draw-pos/",target:"_blank",rel:"noopener noreferrer"}},[t._v("NetworkXのグラフを可視化するときに頂点の座標を指定する"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://acro-engineer.hatenablog.com/entry/2021/05/21/120000",target:"_blank",rel:"noopener noreferrer"}},[t._v("cuGraph でページランクを計算したら爆速だった"),s("OutboundLink")],1),s("br")]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1),t._v(" "),s("p",[s("a",{attrs:{href:"//af.moshimo.com/af/c/click?a_id=2604050&p_id=1555&pc_id=2816&pl_id=29835&guid=ON",rel:"nofollow",referrerpolicy:"no-referrer-when-downgrade"}},[s("img",{staticStyle:{border:"none"},attrs:{src:"//image.moshimo.com/af-img/0866/000000029835.jpg",width:"728",height:"90"}})]),s("img",{staticStyle:{border:"none"},attrs:{src:"//i.moshimo.com/af/i/impression?a_id=2604050&p_id=1555&pc_id=2816&pl_id=29835",width:"1",height:"1"}})]),t._v(" "),s("p",[s("a",{attrs:{href:"//af.moshimo.com/af/c/click?a_id=2641145&p_id=1770&pc_id=3386&pl_id=25847&guid=ON",rel:"nofollow",referrerpolicy:"no-referrer-when-downgrade"}},[s("img",{staticStyle:{border:"none"},attrs:{src:"//image.moshimo.com/af-img/1115/000000025847.png",width:"728",height:"90"}})]),s("img",{staticStyle:{border:"none"},attrs:{src:"//i.moshimo.com/af/i/impression?a_id=2641145&p_id=1770&pc_id=3386&pl_id=25847",width:"1",height:"1"}})])],1)}),[],!1,null,null,null);a.default=r.exports}}]);