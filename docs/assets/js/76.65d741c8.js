(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{381:function(t,a,s){"use strict";s.r(a);var n=s(2),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("PythonとNimが連携できるようなので，Google Colaboratoryで実装しようと思います．")]),t._v(" "),s("p",[t._v("本稿では，フィボナッチ数列でPythonとNimの比較します．")]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1),t._v(" "),s("blockquote",[s("p",[t._v("Google Colaboratory（以下Google Colab）は、Google社が無料で提供している機械学習の教育や研究用の開発環境です。開発環境はJupyter Notebookに似たインターフェースを持ち、Pythonの主要なライブラリがプリインストールされています。"),s("br"),t._v("\n引用元："),s("a",{attrs:{href:"https://interface.cqpub.co.jp/ail01/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Google Colabの使い方"),s("OutboundLink")],1)])]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#google-colabのファイル構成"}},[t._v("Google Colabのファイル構成")])]),s("li",[s("a",{attrs:{href:"#google-driveと連携"}},[t._v("Google Driveと連携")])]),s("li",[s("a",{attrs:{href:"#nim4colabのインストール"}},[t._v("nim4colabのインストール")])]),s("li",[s("a",{attrs:{href:"#nimpyのインストール"}},[t._v("nimpyのインストール")])]),s("li",[s("a",{attrs:{href:"#pythonのみでフィボナッチ数を出力する関数を実行"}},[t._v("Pythonのみでフィボナッチ数を出力する関数を実行")])]),s("li",[s("a",{attrs:{href:"#python-nim-でフィボナッチ数を出力する関数を実行"}},[t._v("Python + Nim でフィボナッチ数を出力する関数を実行")])]),s("li",[s("a",{attrs:{href:"#python-nim-でフィボナッチ数を出力する関数をコンパイル"}},[t._v("Python + Nim でフィボナッチ数を出力する関数をコンパイル")])]),s("li",[s("a",{attrs:{href:"#python-nim-でフィボナッチ数を出力する関数を実行"}},[t._v("Python + Nim でフィボナッチ数を出力する関数を実行")])]),s("li",[s("a",{attrs:{href:"#まとめ"}},[t._v("まとめ")])]),s("li",[s("a",{attrs:{href:"#参考サイト"}},[t._v("参考サイト")])])])]),s("p"),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HBXCY+4DRW36+50+2HM5Z5",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www27.a8.net/svt/bgt?aid=210508450265&wid=001&eno=01&mid=s00000000018015052000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www10.a8.net/0.gif?a8mat=3HBXCY+4DRW36+50+2HM5Z5",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www23.a8.net/svt/bgt?aid=210821855239&wid=001&eno=01&mid=s00000001642001062000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www17.a8.net/0.gif?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",rel:"nofollow"}},[t._v("全国630店舗以上！もみほぐし・足つぼ・ハンドリフレ・クイックヘッドのリラクゼーション店【りらくる】")]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www15.a8.net/0.gif?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"google-colabのファイル構成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#google-colabのファイル構成"}},[t._v("#")]),t._v(" Google Colabのファイル構成")]),t._v(" "),s("p",[t._v("プロジェクトディレクトリはNim_fibとしています．度々，省略しています．")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Nim_fib\n├── Nim4Colab_sample_fib.ipynb\n├── fib.nim \n└── fib.so\n")])])]),s("h2",{attrs:{id:"google-driveと連携"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#google-driveと連携"}},[t._v("#")]),t._v(" Google Driveと連携")]),t._v(" "),s("p",[t._v("Google ColabとGoogle Driveを連携させ，作業ディレクトリ(ここではfirst_nim)に移動します．"),s("br")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Google ColabとGoogle Driveを連携")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" google"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("colab "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" drive\ndrive"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/content/drive'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ディレクトリの移動")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("cd "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("content"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("drive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("My\\ Drive"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Nimnim"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Nim_fib\n!ls\n")])])]),s("h2",{attrs:{id:"nim4colabのインストール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nim4colabのインストール"}},[t._v("#")]),t._v(" nim4colabのインストール")]),t._v(" "),s("p",[t._v("Google Colab で nimコマンドを使用するためのライブラリであるnim4colabをインストールします．")]),t._v(" "),s("p",[t._v("%load_ext nim4colab により%を付けてNimのコマンドを使えます．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("!pip install git"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("//")]),t._v("github"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("demotomohiro"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("nim4colab"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("git\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("load_ext nim4colab\n")])])]),s("h2",{attrs:{id:"nimpyのインストール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nimpyのインストール"}},[t._v("#")]),t._v(" nimpyのインストール")]),t._v(" "),s("p",[t._v("PythonからNimを呼び出すためのNimのライブラリ、nimpyをインストールします．")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://qiita.com/k4saNova/items/5bb67d1cb40ba90431af",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nim初心者が始めるNimとnimpy"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("nimpyをインストールすることで、後述の fib.nim内で使っているnimpyをコンパイル、ライブラリとして使用することができます．")]),t._v(" "),s("p",[t._v("nimbleはNimのライブラリをインストールするためのコマンドです．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("nimble install nimpy "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("y\n")])])]),s("h2",{attrs:{id:"pythonのみでフィボナッチ数を出力する関数を実行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pythonのみでフィボナッチ数を出力する関数を実行"}},[t._v("#")]),t._v(" Pythonのみでフィボナッチ数を出力する関数を実行")]),t._v(" "),s("p",[t._v("以下のコードでは，45番目のフィボナッチ数を出力させてみます．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fib")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 開始時間")]),t._v("\nstart "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# フィボナッチ数を実行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 終了時間")]),t._v("\nelapsed_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 実行時間")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"elapsed_time:{0}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elapsed_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[sec]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 出力結果")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1134903170")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# elapsed_time:360[sec]")]),t._v("\n")])])]),s("h2",{attrs:{id:"python-nim-でフィボナッチ数を出力する関数を実行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-nim-でフィボナッチ数を出力する関数を実行"}},[t._v("#")]),t._v(" Python + Nim でフィボナッチ数を出力する関数を実行")]),t._v(" "),s("p",[t._v("%%writefile ファイル名.nim とすることでマジックコマンドのあるセル内のコードを.nim ファイルとして書き出すことができます．")]),t._v(" "),s("p",[t._v("特徴として，proc を使った関数の宣言，引数の型指定，Pythonモジュールで使用することをNimに支持するための{.exportpy.}があります．")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://medium.com/statch/speeding-up-python-code-with-nim-ec205a8a5d9c",target:"_blank",rel:"noopener noreferrer"}},[t._v("Speeding up Python code with Nim"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# セル内のfib関数をfib.minとして書き出し")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("writefile fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nim\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" nimpy\n\nproc fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exportpy"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("elif")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Writing fib.nim")]),t._v("\n")])])]),s("h2",{attrs:{id:"python-nim-でフィボナッチ数を出力する関数をコンパイル"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-nim-でフィボナッチ数を出力する関数をコンパイル"}},[t._v("#")]),t._v(" Python + Nim でフィボナッチ数を出力する関数をコンパイル")]),t._v(" "),s("p",[t._v("書き出したfib.min をコンパイルします。")]),t._v(" "),s("blockquote",[s("p",[t._v("--tlsEmulation:off・・・スレッドローカルストレージエミュレーションをオン|オフにする"),s("br"),t._v("\n--app:lib・・・コンソールアプリ| GUIアプリ| DLL |静的ライブラリを生成する"),s("br"),t._v("\nスレッドローカルストレージ：変数宣言の際に，記憶域としてthread_localキーワードを指定することで、スレッドごとの静的記憶域に変数が保持される．"),s("br")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://nim-lang.org/docs/nimc.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nim Compiler User Guide"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://cpprefjp.github.io/lang/cpp11/thread_local_storage.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("スレッドローカルストレージ"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),t._v("nim c "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("tlsEmulation"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("off "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("lib "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("so fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("nim\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# output fib.so")]),t._v("\n")])])]),s("h2",{attrs:{id:"python-nim-でフィボナッチ数を出力する関数を実行-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#python-nim-でフィボナッチ数を出力する関数を実行-2"}},[t._v("#")]),t._v(" Python + Nim でフィボナッチ数を出力する関数を実行")]),t._v(" "),s("p",[t._v("コンパイルしたfib.min を実行します．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sys\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" time\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ライブラリのインポート先を追加")]),t._v("\nsys"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("append"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 作成・コンパイルしたfibファイルをインポート")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" fib\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 開始時間")]),t._v("\nstart "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# フィボナッチ数を実行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 終了時間")]),t._v("\nelapsed_time "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" start\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 実行時間")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"elapsed_time:{0}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("elapsed_time"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[sec]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 出力結果")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1134903170")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# elapsed_time:36[sec]")]),t._v("\n")])])]),s("h2",{attrs:{id:"まとめ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#まとめ"}},[t._v("#")]),t._v(" まとめ")]),t._v(" "),s("p",[t._v("重い処理をNimで実行することで，処理スピードが約10倍になりました．")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"center"}}),t._v(" "),s("th",{staticStyle:{"text-align":"right"}},[t._v("Pythonのみ")]),t._v(" "),s("th",{staticStyle:{"text-align":"right"}},[t._v("Python+Nim")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"center"}},[t._v("処理時間")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("約360秒")]),t._v(" "),s("td",{staticStyle:{"text-align":"right"}},[t._v("約36秒")])])])]),t._v(" "),s("p",[t._v("「GPUなしの低スペックの環境で高速化を目指す」という縛りプレイをするのも面白そうです．")]),t._v(" "),s("h2",{attrs:{id:"参考サイト"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考サイト"}},[t._v("#")]),t._v(" 参考サイト")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://agency-star.co.jp/column/nim/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nimの特徴や使い方をわかりやすく解説！"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://qiita.com/k4saNova/items/5bb67d1cb40ba90431af",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nim初心者が始めるNimとnimpy"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://medium.com/statch/speeding-up-python-code-with-nim-ec205a8a5d9c",target:"_blank",rel:"noopener noreferrer"}},[t._v("Speeding up Python code with Nim"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://zenn.dev/megane_otoko/articles/029_nim_for_python",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nimを組み込んでPythonを高速化してみた"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://qiita.com/rigani/items/6e87c7cee6903ed65ed2",target:"_blank",rel:"noopener noreferrer"}},[t._v("至高の言語、Nimを始めるエンジニアへ"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://nim-lang.org/docs/nimc.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nim Compiler User Guide"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://cpprefjp.github.io/lang/cpp11/thread_local_storage.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("スレッドローカルストレージ"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HBXCY+4DRW36+50+2HM5Z5",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www27.a8.net/svt/bgt?aid=210508450265&wid=001&eno=01&mid=s00000000018015052000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www10.a8.net/0.gif?a8mat=3HBXCY+4DRW36+50+2HM5Z5",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",rel:"nofollow"}},[s("img",{attrs:{border:"0",width:"1000",height:"124",alt:"",src:"https://www23.a8.net/svt/bgt?aid=210821855239&wid=001&eno=01&mid=s00000001642001062000&mc=1"}})]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www17.a8.net/0.gif?a8mat=3HIN6N+3YAMCY+CO4+6BMG1",alt:""}})]),t._v(" "),s("p",[s("a",{attrs:{href:"https://px.a8.net/svt/ejp?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",rel:"nofollow"}},[t._v("全国630店舗以上！もみほぐし・足つぼ・ハンドリフレ・クイックヘッドのリラクゼーション店【りらくる】")]),s("img",{attrs:{border:"0",width:"1",height:"1",src:"https://www15.a8.net/0.gif?a8mat=3HIN6N+7FBNEA+4AQ0+5YJRM",alt:""}})]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1)],1)}),[],!1,null,null,null);a.default=e.exports}}]);