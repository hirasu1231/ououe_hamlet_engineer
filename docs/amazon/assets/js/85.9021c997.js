(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{395:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("Docker＋Selenium＋Chromeで甘茶の音楽工房ウェブスクレイピングします．本稿では，前回のまでの工程をdef文を用いて定義します．"),s("br")]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1),t._v(" "),s("p",[t._v("作業用BGMとして"),s("a",{attrs:{href:"https://amachamusic.chagasi.com/image_kurai.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("甘茶の音楽工房"),s("OutboundLink")],1),t._v("の音楽をダウンロードして聞いていました．いい加減面倒臭くなってきたので，ウェブスクレイピングでダウンロードしていきます．")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#スクリプト"}},[t._v("スクリプト")]),s("ul",[s("li",[s("a",{attrs:{href:"#モジュール"}},[t._v("モジュール")])]),s("li",[s("a",{attrs:{href:"#selenium-webdriverの起動-docker"}},[t._v("selenium.webdriverの起動(docker)")])]),s("li",[s("a",{attrs:{href:"#selenium-webdriverの起動-ローカル"}},[t._v("selenium.webdriverの起動(ローカル)")])]),s("li",[s("a",{attrs:{href:"#webドライバーで甘茶の音楽工房の音楽をダウンロード"}},[t._v("webドライバーで甘茶の音楽工房の音楽をダウンロード")])]),s("li",[s("a",{attrs:{href:"#webドライバーで甘茶の音楽工房のイメージ音楽ごとのページ情報を取得"}},[t._v("webドライバーで甘茶の音楽工房のイメージ音楽ごとのページ情報を取得")])]),s("li",[s("a",{attrs:{href:"#甘茶の音楽工房の全ページ中の音楽をダウンロード"}},[t._v("甘茶の音楽工房の全ページ中の音楽をダウンロード")])]),s("li",[s("a",{attrs:{href:"#甘茶の音楽工房のダウンロード実行"}},[t._v("甘茶の音楽工房のダウンロード実行")])])])]),s("li",[s("a",{attrs:{href:"#まとめ"}},[t._v("まとめ")])]),s("li",[s("a",{attrs:{href:"#参考サイト"}},[t._v("参考サイト")])])])]),s("p"),t._v(" "),s("p",[s("a",{attrs:{href:"//af.moshimo.com/af/c/click?a_id=2604050&p_id=1555&pc_id=2816&pl_id=29835&guid=ON",rel:"nofollow",referrerpolicy:"no-referrer-when-downgrade"}},[s("img",{staticStyle:{border:"none"},attrs:{src:"//image.moshimo.com/af-img/0866/000000029835.jpg",width:"728",height:"90"}})]),s("img",{staticStyle:{border:"none"},attrs:{src:"//i.moshimo.com/af/i/impression?a_id=2604050&p_id=1555&pc_id=2816&pl_id=29835",width:"1",height:"1"}})]),t._v(" "),s("p",[s("a",{attrs:{href:"//af.moshimo.com/af/c/click?a_id=2641145&p_id=1770&pc_id=3386&pl_id=25847&guid=ON",rel:"nofollow",referrerpolicy:"no-referrer-when-downgrade"}},[s("img",{staticStyle:{border:"none"},attrs:{src:"//image.moshimo.com/af-img/1115/000000025847.png",width:"728",height:"90"}})]),s("img",{staticStyle:{border:"none"},attrs:{src:"//i.moshimo.com/af/i/impression?a_id=2641145&p_id=1770&pc_id=3386&pl_id=25847",width:"1",height:"1"}})]),t._v(" "),s("h2",{attrs:{id:"スクリプト"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#スクリプト"}},[t._v("#")]),t._v(" スクリプト")]),t._v(" "),s("h3",{attrs:{id:"モジュール"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#モジュール"}},[t._v("#")]),t._v(" モジュール")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# coding: UTF-8")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" os\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" requests\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" urllib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" webdriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selenium"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Options\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" selene"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("driver "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" SeleneDriver\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" webdriver_manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" chrome_version\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" webdriver_manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("chrome "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ChromeDriverManager\n")])])]),s("h3",{attrs:{id:"selenium-webdriverの起動-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selenium-webdriverの起動-docker"}},[t._v("#")]),t._v(" selenium.webdriverの起動(docker)")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# docker上でselenium.webdriverの起動")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("webdriver_start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Chrome のオプションを設定する")]),t._v("\n    options "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ChromeOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Selenium Server に接続する")]),t._v("\n    driver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Remote"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        command_executor"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://localhost:4444/wd/hub'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" driver\n")])])]),s("h3",{attrs:{id:"selenium-webdriverの起動-ローカル"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#selenium-webdriverの起動-ローカル"}},[t._v("#")]),t._v(" selenium.webdriverの起動(ローカル)")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ローカル上でselenium.webdriverの起動")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("webdriver_local_start")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# versionに応じたchrome driver のインストール")]),t._v("\n    version "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" chrome_version"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://chromedriver.storage.googleapis.com/LATEST_RELEASE_'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" version\n    response "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" requests"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    options "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("add_argument"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'--headless'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# インストールしたchrome driverでchromeを起動")]),t._v("\n    driver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SeleneDriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("wrap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webdriver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Chrome"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        executable_path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ChromeDriverManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("install"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n        chrome_options"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" driver\n")])])]),s("h3",{attrs:{id:"webドライバーで甘茶の音楽工房の音楽をダウンロード"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webドライバーで甘茶の音楽工房の音楽をダウンロード"}},[t._v("#")]),t._v(" webドライバーで甘茶の音楽工房の音楽をダウンロード")]),t._v(" "),s("p",[t._v("イメージ音楽のページから，2ページ目,3ページ目のURLを取得します．")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# webドライバーで甘茶の音楽工房の音楽をダウンロード")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("amacha_page_DL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 出力ディレクトリ作成")]),t._v("\n    os"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("makedirs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bgm'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exist_ok"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WebElementから各mp3のダウンロード先URLを取得")]),t._v("\n    elements "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_elements_by_class_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"download"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" element "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" elements"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#print(element.get_attribute('innerHTML')) # WebElementからhtmlを取得")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mp3の詳細ページのURL,tagで取得")]),t._v("\n        aTag "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_tag_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# mp3のダウンロードページのURL")]),t._v("\n        dlurl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" aTag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_attribute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("replace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'music_'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mp3/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("replace"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.mp3'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        dlfile "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bgm/'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" dlurl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("split"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        urllib"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("request"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("urlretrieve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dlurl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" dlfile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ダウンロード実行:要はリンク先をダウンロード")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("current_url\n")])])]),s("h3",{attrs:{id:"webドライバーで甘茶の音楽工房のイメージ音楽ごとのページ情報を取得"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#webドライバーで甘茶の音楽工房のイメージ音楽ごとのページ情報を取得"}},[t._v("#")]),t._v(" webドライバーで甘茶の音楽工房のイメージ音楽ごとのページ情報を取得")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# webドライバーで甘茶の音楽工房のイメージ音楽ごとのページ情報を取得")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("amacha_page_tags")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WebElementから次ページのURLを取得")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# classで指定(1つ：find_element_by_class_name:element!!)")]),t._v("\n    element "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_element_by_class_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pager"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 次ページのURL,tagで取得")]),t._v("\n    aPageTags "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("find_elements_by_tag_name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" aPageTags\n")])])]),s("h3",{attrs:{id:"甘茶の音楽工房の全ページ中の音楽をダウンロード"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#甘茶の音楽工房の全ページ中の音楽をダウンロード"}},[t._v("#")]),t._v(" 甘茶の音楽工房の全ページ中の音楽をダウンロード")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 甘茶の音楽工房の全ページ中の音楽をダウンロード")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("amacha_DL")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 甘茶の音楽工房にアクセス")]),t._v("\n    driver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver_start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# イメージ音楽の最初のページをダウンロード")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amacha_page_DL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2ページ目,3ページ目のURLを示すtagを取得")]),t._v("\n    aPageTags "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" amacha_page_tags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tagから2ページ目,3ページ目のURLを取得")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" aPageTag "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" aPageTags"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tagからhref要素を取得")]),t._v("\n        page_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" aPageTag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get_attribute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'href'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 次ページのURLにアクセス")]),t._v("\n        next_driver "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" webdriver_start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        next_driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("get"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("page_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ダウンロード")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amacha_page_DL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("next_driver"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"甘茶の音楽工房のダウンロード実行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#甘茶の音楽工房のダウンロード実行"}},[t._v("#")]),t._v(" 甘茶の音楽工房のダウンロード実行")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("image_music_url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://amachamusic.chagasi.com/image_kurai.html'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\namacha_DL"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("image_music_url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"まとめ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#まとめ"}},[t._v("#")]),t._v(" まとめ")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://amachamusic.chagasi.com/image_kurai.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("甘茶の音楽工房"),s("OutboundLink")],1),t._v("の音楽のダウンロードを実装しました．別シリーズでダウンロードしたmp3を乱数で任意の再生時間で結合してみようと思います．")]),t._v(" "),s("h2",{attrs:{id:"参考サイト"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考サイト"}},[t._v("#")]),t._v(" 参考サイト")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://qiita.com/Chanmoro/items/9a3c86bb465c1cce738a",target:"_blank",rel:"noopener noreferrer"}},[t._v("10分で理解する Selenium"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://qiita.com/UrTom/items/bcd4d28443826ed92921",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python + Selenium + ChromeでChromeバージョンに合ったChromeDriverを自動インストールする方法"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://qiita.com/kei0919/items/f6f696169c92c936374c",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dockerコンテナからseleniumを使ってスクレイピング"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://qiita.com/maroKanatani/items/e52984f37cc5474ccd98",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python×SeleniumでWebスクレイピング実践"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://qiita.com/mochio/items/dc9935ee607895420186",target:"_blank",rel:"noopener noreferrer"}},[t._v("Selenium webdriverよく使う操作メソッドまとめ"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://qiita.com/sikkim/items/447b72e6ec45849058cd",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker上でSeleniumとHeadless ChromeとPython3を動かす"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://engineeeer.com/python-selenium-webelement-get-html/",target:"_blank",rel:"noopener noreferrer"}},[t._v("【Python】seleniumでWebElementからhtmlを取得する"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"https://qiita.com/memakura/items/f80d2e2c59514cfc14c9",target:"_blank",rel:"noopener noreferrer"}},[t._v("Python + Selenium + Chrome でファイル保存まわり"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"//af.moshimo.com/af/c/click?a_id=2604050&p_id=1555&pc_id=2816&pl_id=29835&guid=ON",rel:"nofollow",referrerpolicy:"no-referrer-when-downgrade"}},[s("img",{staticStyle:{border:"none"},attrs:{src:"//image.moshimo.com/af-img/0866/000000029835.jpg",width:"728",height:"90"}})]),s("img",{staticStyle:{border:"none"},attrs:{src:"//i.moshimo.com/af/i/impression?a_id=2604050&p_id=1555&pc_id=2816&pl_id=29835",width:"1",height:"1"}})]),t._v(" "),s("p",[s("a",{attrs:{href:"//af.moshimo.com/af/c/click?a_id=2641145&p_id=1770&pc_id=3386&pl_id=25847&guid=ON",rel:"nofollow",referrerpolicy:"no-referrer-when-downgrade"}},[s("img",{staticStyle:{border:"none"},attrs:{src:"//image.moshimo.com/af-img/1115/000000025847.png",width:"728",height:"90"}})]),s("img",{staticStyle:{border:"none"},attrs:{src:"//i.moshimo.com/af/i/impression?a_id=2641145&p_id=1770&pc_id=3386&pl_id=25847",width:"1",height:"1"}})]),t._v(" "),s("ClientOnly",[s("CallInArticleAdsense")],1)],1)}),[],!1,null,null,null);a.default=n.exports}}]);